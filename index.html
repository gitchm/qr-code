<html lang="en">

<head>
  <title>GITHCM Pass</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/signin.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="files/favicon.png">
  <script src="js/script.js"></script>
  <link rel="stylesheet" href="styles/style.css" />
  <script src="m-datepicker.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.2/dist/FileSaver.min.js"></script>
  <script src="js/qrcode.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
  <script src="js/dom-to-image.js"></script>

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <!-- MDB -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>



</head>

<body class="text-center justify-content-center mt-5 mb-5" id="gradient">
  <form class="form_body" data-aos="fade-up" name="valForm" data-aos="zoom-in" data-aos-once="true" method="post" action="">
    <img class=" mt-2 mb-4" src="files/nerw_logo.png" alt="" width="300">
    <h2 class="text-dark" data-aos-once="true" data-aos="fade-up" data-aos-delay="550" data-aos-duration="2000">Enter Applicable Information</h2>
    <div class="form-floating mb-2" data-aos="fade-down-left" data-aos-delay="350" data-aos-duration="500">
      <input type="text" class="form-control -overlayed" id="fname" name="nname" placeholder="Lastname-Firstname-Middle" onkeyup="success()">
      <label for="floatingInput">Full Name*</label>
    </div>
    <div class="form-floating  mb-2" data-aos-once="true" data-aos="fade-down-right" data-aos-delay="550" data-aos-duration="500">
      <input type="text" id="date" name="ndate" class="form-control" placeholder="dd/mm/yyyy">
      <label for="floatingInput">Birthdate*</label>
    </div>
    <div class="input-group form-floating mb-2" data-aos-once="true" data-aos="fade-down-left" data-aos-delay="750" data-aos-duration="500">
      <label class="input-group-text" for="inputGroupSelect01">Gender*</label>
      <select class="form-select" id="inputGroupSelect01">
        <option selected>Gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>
    </div>
    <div class="form-floating mb-2" data-aos-once="true" data-aos="fade-down-right" data-aos-delay="950">
      <input type="text" class="form-control" rows="3" id="faddress" name="naddress" placeholder="blg.no/district/barangay/">
      <label for="floatingInput">Address*</label>
    </div>
    <div class="form-floating mb-2" data-aos-once="true" data-aos="fade-down-left" data-aos-delay="1150">
      <input type="email" class="form-control" id="femail" name="nemail" placeholder="fname.lastname@gmail.com">
      <label for="floatingInput">Email</label>
    </div>
    <div class="form-floating mb-2" data-aos-once="true" data-aos="fade-down-right" data-aos-delay="1350">
      <input type="number" class="form-control" id="fphone" name="nphone" placeholder="09123456789">
      <label for="floatingInput">Phone Number*</label>
    </div>
    <button type="button" class="w-100 btn btn-lg btn-primary mt-4" data-aos-once="true" data-aos="flip-right" data-aos-delay="1450" data-aos-duration="2000" id="generate" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Generate QR
      Code</button>
    <button type="button" class="w-100 btn btn-lg btn-info mt-2" data-aos-once="true" data-aos="flip-right" data-aos-delay="1850" data-aos-duration="2000" id="generate" data-bs-toggle="modal" data-bs-target="#guidestatic">Guide</button>
    <p class="mt-5 mb-3 text-muted" data-aos-once="true" data-aos="zoom-in" data-aos-delay="2050" data-aos-duration="2000">&copy; Gabriel Asuncion </p>
  </form>

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Generated QR Code</h5>
        </div>
        <div class="modal-body" id="widget">
          <input type="text" size="60" class="form-control" id="content" placeholder="Enter content" style="display:none;" />
          <h2 class="p-3 mb-2 bg-info text-white" id="qr-name"></h2>
          <!-- <img class="qr-code img-thumbnail img-responsive" width="100%;" /> -->
          <div id="qrcoder" width="100%;"></div>
          <div id="saved-output"></div>
        </div>
        <div class="modal-footer">
          <a class="btn btn-primary" id="btnSave">Save</a>
          <button id="closeclicked" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Back</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="guidestatic" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">3 Step Process</h5>
        </div>
        <div class="modal-body">
          <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="files/guide1_1.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h5 style="color:black;">1.) Fill up everything</h5>
                </div>
              </div>
              <div class="carousel-item">
                <img src="files/guide2_2.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h5 style="color:black;">2.) On Mobile: Tap the year</h5>
                </div>
              </div>
              <div class="carousel-item">
                <img src="files/guide3.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h5 style="color:black;">3.) QR can be save on local device.</h5>
                </div>
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Back</button>
        </div>
      </div>
    </div>
  </div>

</body>
<script src="https://code.jquery.com/jquery-3.5.1.js">
</script>
<script src="node_modules/easyqrcodejs/src/easy.qrcode.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script>
  AOS.init();
</script>
<script>
  var date = document.getElementById('date');

  function checkValue(str, max) {
    if (str.charAt(0) !== '0' || str == '00') {
      var num = parseInt(str);
      if (isNaN(num) || num <= 0 || num > max) num = 1;
      str = num > parseInt(max.toString().charAt(0)) &&
        num.toString().length == 1 ? '0' + num : num.toString();
    };
    return str;
  };

  date.addEventListener('input', function(e) {
    this.type = 'text';
    var input = this.value;
    if (/\D\/$/.test(input)) input = input.substr(0, input.length - 1);
    var values = input.split('/').map(function(v) {
      return v.replace(/\D/g, '')
    });
    if (values[0]) values[0] = checkValue(values[0], 12);
    if (values[1]) values[1] = checkValue(values[1], 31);
    var output = values.map(function(v, i) {
      return v.length == 2 && i < 2 ? v + '/' : v;
    });
    this.value = output.join('').substr(0, 10);
  });
</script>
<script>
  $(function() {
    $('#closeclicked').click(function() {
      clearCode();
    });
  });
</script>
<script>
  $(function() {
    $("#btnSave").click(function() {
      html2canvas($("#widget"), {
        onrendered: function(canvas) {
          theCanvas = canvas;
          canvas.toBlob(function(blob) {
            saveAs(blob, "GITHCM QR.png");
          });
        }
      });
    });
  });
</script>
<script>
  function htmlEncode(value) {
    return $('<div/>').text(value)
      .html();
  }
  $(function() {
    $('#generate').click(function() {
      generateQR();
      let finalURL =
        'https://chart.googleapis.com/chart?cht=qr&chl=' +
        htmlEncode($('#content').val()) +
        '&chs=520x520&chld=L|0'
      $('.qr-code').attr('src', finalURL);
      $('.qr-dl').attr('href', finalURL + ".jpg");
    });
  });
</script>

</html>